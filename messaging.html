<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messaging Backend - SMS and WhatsApp</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container-fluid p-4">
        <div class="row justify-content-center">
            <div class="col-12" style="max-width: 1400px;">
                
                <!-- Header -->
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h1 class="h2 fw-semibold mb-1">Messaging control room</h1>
                        <p class="text-muted small mb-0">Send and track SMS and WhatsApp in one place</p>
                    </div>
                    <div class="d-flex align-items-center gap-2">
                        <div class="position-relative">
                            <i class="bi bi-search position-absolute start-0 top-50 translate-middle-y ms-3 text-muted"></i>
                            <input type="text" class="form-control ps-5" style="width: 280px; max-width: 100%;" placeholder="Search name or phone" id="searchInput">
                        </div>
                        <button class="btn btn-outline-secondary">
                            <i class="bi bi-funnel me-2"></i>Filters
                        </button>
                    </div>
                </div>

                <div class="row g-4">
                    <!-- Left Column: Customers and History -->
                    <div class="col-12 col-lg-3 order-1 order-lg-1">
                        
                        <!-- Customers Card -->
                        <div class="card mb-4">
                            <div class="card-body p-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <h6 class="fw-medium mb-0">Customers</h6>
                                </div>
                                <div class="scrollable" id="customersList">
                                    <div class="customer-item p-2 mb-2 selected" data-customer="c1">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="fw-medium text-sm">John Hamilton</div>
                                            <div class="text-xs text-muted">2 hours ago</div>
                                        </div>
                                        <div class="text-xs text-muted">+447700900001</div>
                                        <div class="mt-1">
                                            <span class="badge badge-whatsapp me-1">whatsapp</span>
                                            <span class="badge border">Pickup</span>
                                        </div>
                                    </div>
                                    
                                    <div class="customer-item p-2 mb-2" data-customer="c2">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="fw-medium text-sm">Sarah Malik</div>
                                            <div class="text-xs text-muted">4 hours ago</div>
                                        </div>
                                        <div class="text-xs text-muted">+447700900002</div>
                                        <div class="mt-1">
                                            <span class="badge badge-sms me-1">sms</span>
                                            <span class="badge border">Terminal 2</span>
                                        </div>
                                    </div>
                                    
                                    <div class="customer-item p-2 mb-2" data-customer="c3">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="fw-medium text-sm">Adam Brown</div>
                                            <div class="text-xs text-muted">6 hours ago</div>
                                        </div>
                                        <div class="text-xs text-muted">+447700900003</div>
                                        <div class="mt-1">
                                            <span class="badge badge-whatsapp me-1">whatsapp</span>
                                            <span class="badge border">Damage report</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Messages Card -->
                        <div class="card">
                            <div class="card-body p-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <h6 class="fw-medium mb-0">Recent messages</h6>
                                </div>
                                <div class="scrollable">
                                    <div class="history-item p-2 mb-2">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="fw-medium text-sm">John Hamilton</div>
                                            <div class="text-xs text-muted">2h ago</div>
                                        </div>
                                        <div class="text-xs text-muted">WHATSAPP • delivered</div>
                                        <p class="text-sm mt-1 mb-0 line-clamp-2">Hi John, welcome back. Your car is ready at bay B.</p>
                                    </div>
                                    
                                    <div class="history-item p-2 mb-2">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="fw-medium text-sm">Sarah Malik</div>
                                            <div class="text-xs text-muted">4h ago</div>
                                        </div>
                                        <div class="text-xs text-muted">SMS • sent</div>
                                        <p class="text-sm mt-1 mb-0 line-clamp-2">Hi Sarah, we are a few mins behind due to traffic at T5.</p>
                                    </div>
                                    
                                    <div class="history-item p-2 mb-2">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="fw-medium text-sm">Adam Brown</div>
                                            <div class="text-xs text-muted">6h ago</div>
                                        </div>
                                        <div class="text-xs text-muted">WHATSAPP • read</div>
                                        <p class="text-sm mt-1 mb-0 line-clamp-2">Please share a picture of the mark. We will arrange repair.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Center Column: Composer -->
                    <div class="col-12 col-lg-6 order-3 order-lg-2">
                        
                        <!-- Compose Card -->
                        <div class="card mb-4">
                            <div class="card-body p-4">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <h6 class="fw-medium mb-0 me-3">Compose</h6>
                                    <div class="d-flex flex-wrap align-items-center gap-2 flex-shrink-0">
                                        <select class="form-select" style="width: 120px;" id="channelSelect">
                                            <option>WhatsApp</option>
                                            <option>SMS</option>
                                        </select>
                                        <select class="form-select" style="width: 160px;" id="templateSelect">
                                            <option value="">Choose template</option>
                                            <option value="t1">Arrival pick up</option>
                                            <option value="t2">Delay notice</option>
                                            <option value="t3">Review request</option>
                                        </select>
                                        <button class="btn btn-outline-secondary" id="clearTemplate">
                                            <i class="bi bi-x"></i>Clear
                                        </button>
                                    </div>
                                </div>

                                <div class="row g-3 mb-3">
                                    <div class="col-6">
                                        <label class="form-label text-xs text-muted">To</label>
                                        <input type="text" class="form-control" placeholder="Select a customer" value="John Hamilton • +447700900001" readonly>
                                    </div>
                                    <div class="col-6">
                                        <label class="form-label text-xs text-muted">From sender ID</label>
                                        <input type="text" class="form-control" placeholder="StarParking or long code">
                                    </div>
                                </div>

                                <div class="mb-3" id="templateVariables">
                                    <label class="form-label text-xs text-muted">Template variables</label>
                                    <div class="row g-2">
                                        <div class="col-4">
                                            <div class="text-xs text-muted">name</div>
                                            <input type="text" class="form-control variable-input" placeholder="Value for name" data-variable="name" value="">
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-3 d-none" id="plainTextArea">
                                    <label class="form-label text-xs text-muted">Text</label>
                                    <textarea class="form-control" rows="6" placeholder="Type your message" id="plainText"></textarea>
                                </div>

                                <div class="row g-3 mb-3">
                                    <div class="col-4">
                                        <label class="form-label text-xs text-muted">Attach media</label>
                                        <button class="btn btn-outline-secondary w-100">
                                            <i class="bi bi-paperclip me-1"></i>
                                            Upload file
                                        </button>
                                        <p class="text-xs text-muted mt-1 mb-0">Images, pdf, vcard</p>
                                    </div>
                                    <div class="col-4">
                                        <label class="form-label text-xs text-muted">Schedule</label>
                                        <div class="d-flex align-items-center gap-2">
                                            <input class="form-check-input" type="checkbox" id="scheduleSwitch" style="margin-top: 0;">
                                            <label class="form-check-label text-sm" for="scheduleSwitch">
                                                Send later
                                            </label>
                                        </div>
                                        <div class="calendar-container mt-2 d-none" id="scheduleCalendar">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <button type="button" class="btn btn-sm btn-outline-secondary" id="prevMonth">
                                                    <i class="bi bi-chevron-left"></i>
                                                </button>
                                                <span class="fw-medium text-sm" id="currentMonth">October 2025</span>
                                                <button type="button" class="btn btn-sm btn-outline-secondary" id="nextMonth">
                                                    <i class="bi bi-chevron-right"></i>
                                                </button>
                                            </div>
                                            <div class="calendar-grid">
                                                <div class="row g-0 mb-1">
                                                    <div class="col text-center text-xs text-muted fw-medium">Su</div>
                                                    <div class="col text-center text-xs text-muted fw-medium">Mo</div>
                                                    <div class="col text-center text-xs text-muted fw-medium">Tu</div>
                                                    <div class="col text-center text-xs text-muted fw-medium">We</div>
                                                    <div class="col text-center text-xs text-muted fw-medium">Th</div>
                                                    <div class="col text-center text-xs text-muted fw-medium">Fr</div>
                                                    <div class="col text-center text-xs text-muted fw-medium">Sa</div>
                                                </div>
                                                <div class="calendar-dates" id="calendarDates">
                                                    <!-- Calendar dates will be populated by JavaScript -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <label class="form-label text-xs text-muted">A B test</label>
                                        <div class="d-flex align-items-center gap-2">
                                            <input class="form-check-input" type="checkbox" id="abTestSwitch" style="margin-top: 0;">
                                            <label class="form-check-label text-sm" for="abTestSwitch">
                                                Enable test
                                            </label>
                                        </div>
                                        <button class="btn btn-outline-secondary w-100 mt-2 d-none" id="defineVariants">Define variants</button>
                                    </div>
                                </div>

                                <!-- Preview Box -->
                                <div class="card border">
                                    <div class="card-body p-3">
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <div class="fw-medium text-sm">Preview</div>
                                            <div class="text-xs text-muted">
                                                Characters: <span id="previewLength">70</span>
                                            </div>
                                        </div>
                                        <div class="preview-box" id="previewText">Hi {{name}}, welcome back. Your car is ready at bay B. Reply 1 for five mins, 2 for ten mins.</div>
                                    </div>
                                </div>

                                <div class="d-flex justify-content-between align-items-center mt-3">
                                    <div class="d-flex align-items-center gap-3">
                                        <button class="btn btn-primary">
                                            <i class="bi bi-send me-1"></i>Send message
                                        </button>
                                        <button class="btn btn-outline-secondary">
                                            <i class="bi bi-plus me-1"></i>Queue
                                        </button>
                                    </div>
                                    <div class="text-xs text-muted">Consent respected. Quiet hours in effect 21:00 to 08:00.</div>
                                </div>
                            </div>
                        </div>

                        <!-- Smart Options Card -->
                        <div class="card">
                            <div class="card-body p-4">
                                <h6 class="fw-medium mb-3">Smart options</h6>
                                <div class="row g-3">
                                    <div class="col-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="linkShortening">
                                            <label class="form-check-label text-sm" for="linkShortening">Link shortening</label>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="trackClicks">
                                            <label class="form-check-label text-sm" for="trackClicks">Track clicks</label>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="deliveryReceipt">
                                            <label class="form-check-label text-sm" for="deliveryReceipt">Delivery receipt</label>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="readReceipt">
                                            <label class="form-check-label text-sm" for="readReceipt">Read receipt</label>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="autoReply">
                                            <label class="form-check-label text-sm" for="autoReply">Auto reply</label>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="quietHours">
                                            <label class="form-check-label text-sm" for="quietHours">Quiet hours</label>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="consentCheck">
                                            <label class="form-check-label text-sm" for="consentCheck">Consent check</label>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="retryFailed">
                                            <label class="form-check-label text-sm" for="retryFailed">Retry failed</label>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="duplicateFilter">
                                            <label class="form-check-label text-sm" for="duplicateFilter">Duplicate filter</label>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="sentimentAnalysis">
                                            <label class="form-check-label text-sm" for="sentimentAnalysis">Sentiment analysis</label>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="spamFilter">
                                            <label class="form-check-label text-sm" for="spamFilter">Spam filter</label>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="languageDetect">
                                            <label class="form-check-label text-sm" for="languageDetect">Language detect</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Templates and Live Thread -->
                    <div class="col-12 col-lg-3 order-2 order-lg-3">
                        
                        <!-- Templates Card -->
                        <div class="card mb-4">
                            <div class="card-body p-3">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h6 class="fw-medium mb-0">Templates</h6>
                                    <button class="btn btn-sm btn-primary">
                                        <i class="bi bi-plus me-1"></i>New
                                    </button>
                                </div>
                                
                                <div class="scrollable mb-3">
                                    <div class="template-item p-2 mb-2">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="fw-medium text-sm">Arrival pick up</div>
                                            <span class="badge badge-whatsapp">whatsapp</span>
                                        </div>
                                        <div class="text-xs text-muted mt-1">Hi {{name}}, welcome back. Your car is ready at bay B. Reply 1 for five mins, 2 for ten mins.</div>
                                        <div class="d-flex justify-content-between align-items-center mt-2">
                                            <div class="text-xs text-muted">2 variables</div>
                                            <button class="btn btn-sm btn-outline-secondary">
                                                <i class="bi bi-pencil"></i>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="template-item p-2 mb-2">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="fw-medium text-sm">Delay notice</div>
                                            <span class="badge badge-sms">sms</span>
                                        </div>
                                        <div class="text-xs text-muted mt-1">Hi {{name}}, we are running a few mins behind due to traffic at {{terminal}}. We will update you shortly.</div>
                                        <div class="d-flex justify-content-between align-items-center mt-2">
                                            <div class="text-xs text-muted">2 variables</div>
                                            <button class="btn btn-sm btn-outline-secondary">
                                                <i class="bi bi-pencil"></i>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="template-item p-2 mb-2">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="fw-medium text-sm">Review request</div>
                                            <span class="badge badge-sms">sms</span>
                                        </div>
                                        <div class="text-xs text-muted mt-1">Thanks {{name}} for using Star Parking. Share your experience here: {{short_link}}</div>
                                        <div class="d-flex justify-content-between align-items-center mt-2">
                                            <div class="text-xs text-muted">2 variables</div>
                                            <button class="btn btn-sm btn-outline-secondary">
                                                <i class="bi bi-pencil"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Add Template Form -->
                                <div class="border rounded-3 p-2">
                                    <div class="fw-medium text-sm mb-2">Add template</div>
                                    <input type="text" class="form-control mb-2" placeholder="Template name">
                                    <select class="form-select mb-2">
                                        <option>WhatsApp</option>
                                        <option>SMS</option>
                                    </select>
                                    <textarea class="form-control mb-2" rows="4" placeholder="Hi {{name}}, text here"></textarea>
                                    <button class="btn btn-primary w-100">Save template</button>
                                </div>
                            </div>
                        </div>

                        <!-- Live Thread Card -->
                        <div class="card">
                            <div class="card-body p-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <h6 class="fw-medium mb-0">Live thread</h6>
                                    <span class="badge border">John Hamilton</span>
                                </div>
                                <div class="live-thread" id="liveThread">
                                    <div class="d-flex justify-content-start mb-2">
                                        <div class="message-bubble-received p-2">
                                            <div class="text-sm">Hello, I am ready at bay B</div>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-end mb-2">
                                        <div class="message-bubble-sent p-2">
                                            <div class="text-sm">Thanks John, five mins please</div>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-start mb-2">
                                        <div class="message-bubble-received p-2">
                                            <div class="text-sm">Sure</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bottom: Analytics -->
                <div class="mt-4">
                    <div class="card">
                        <div class="card-body p-4">
                            <h6 class="fw-medium mb-3">Delivery and result</h6>
                            <div class="row g-3">
                                <div class="col-3">
                                    <div class="stats-card p-3">
                                        <div class="display-6 fw-bold">247</div>
                                        <div class="text-sm text-muted">Sent today</div>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="stats-card p-3">
                                        <div class="display-6 fw-bold">96%</div>
                                        <div class="text-sm text-muted">Delivery rate</div>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="stats-card p-3">
                                        <div class="display-6 fw-bold">43</div>
                                        <div class="text-sm text-muted">Replies</div>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="stats-card p-3">
                                        <div class="display-6 fw-bold">2.1s</div>
                                        <div class="text-sm text-muted">Avg response</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="app.js"></script>
</body>
</html>